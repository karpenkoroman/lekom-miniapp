<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>–õ–ï–ö–û–ú ¬∑ –ê—É–¥–∏—Ç –ø–µ—á–∞—Ç–∏</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;margin:0;background:#0f1115;color:#f5f7fb}
  .wrap{max-width:900px;margin:0 auto;padding:20px}
  .card{background:#12151c;border-radius:16px;box-shadow:0 6px 24px rgba(0,0,0,.3);padding:20px}
  h1{margin:0 0 6px;font-size:22px}
  .sub{color:#9aa0a6;margin-bottom:8px}
  .meta{font-size:13px;color:#9aa0a6;margin-bottom:12px}
  .q{border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:14px;margin:12px 0;background:rgba(255,255,255,.03)}
  .q legend{font-weight:700;margin-bottom:8px}
  .opt{display:flex;gap:10px;align-items:flex-start;margin:8px 0}
  .progress{height:8px;background:#2a2f3a;border-radius:8px;overflow:hidden;margin:10px 0}
  .bar{height:100%;width:0;background:#0a84ff;transition:width .2s ease}
  .hint{font-size:12px;color:#9aa0a6}
  .result{display:none;margin-top:16px;padding:16px;border-left:4px solid #0a84ff;background:rgba(10,132,255,.08);border-radius:10px}
  .ctas{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .cta{display:inline-block;text-decoration:none;padding:12px 14px;border-radius:10px;font-weight:700;cursor:pointer}
  .cta.primary{background:#0a84ff;color:#fff}
  .cta.secondary{background:#1e2533;color:#fff}
  #leadForm{display:none;margin-top:20px}
  #leadForm input,#leadForm textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #334155;background:#0e1420;color:#fff}
  #sendLead{background:#0a84ff;color:#fff;font-weight:700;padding:12px;border:none;border-radius:10px;cursor:pointer;width:100%;margin-top:8px}
  #leadMsg{margin-top:10px;color:#7dd3fc;display:none}
  #fallbackSubmit{display:block;margin:14px 0 0;width:100%;padding:12px 14px;border:0;border-radius:10px;background:#0a84ff;color:#fff;font-weight:700}
  .in-tg #fallbackSubmit{display:none}
  a{color:#7dd3fc}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>–ê—É–¥–∏—Ç –ø–µ—á–∞—Ç–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã</h1>
    <div class="sub">–ù–µ—É–¥–æ–±–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ IT-–¥–∏—Ä–µ–∫—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –∑–∞–¥–∞—Ç—å —Å–∞–º —Å–µ–±–µ</div>
    <div class="meta">‚è± ~5 –º–∏–Ω—É—Ç ¬∑ –û—Ç–≤–µ—Ç—ã –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã</div>
    <div id="diag" class="hint"></div>

    <div class="progress"><div id="bar" class="bar"></div></div>
    <div id="pc" class="hint">0/11</div>

    <form id="f">
      <fieldset class="q"><legend>1. –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —É—á—ë—Ç–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤?</legend>
        <label class="opt"><input type="radio" name="q1" value="1">–ü–æ–ª–Ω—ã–π –∏ —Ç–æ—á–Ω—ã–π —É—á—ë—Ç –≤—Å–µ—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤</label>
        <label class="opt"><input type="radio" name="q1" value="0">–¢–æ–ª—å–∫–æ —Ä–∞—Å—Ö–æ–¥–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</label>
        <label class="opt"><input type="radio" name="q1" value="0">–ß–∞—Å—Ç–∏—á–Ω–æ/–ø–æ-—Ä–∞–∑–Ω–æ–º—É</label>
        <label class="opt"><input type="radio" name="q1" value="0">¬´–ù–∞ –≥–ª–∞–∑¬ª</label>
      </fieldset>

      <fieldset class="q"><legend>2. –ö–∞–ø–∑–∞—Ç—Ä–∞—Ç—ã (–∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ) —É—á–∏—Ç—ã–≤–∞–µ—Ç–µ?</legend>
        <label class="opt"><input type="radio" name="q2" value="1">–î–∞, —Å—á–∏—Ç–∞–µ–º TCO</label>
        <label class="opt"><input type="radio" name="q2" value="0">–ß–∞—Å—Ç–∏—á–Ω–æ</label>
        <label class="opt"><input type="radio" name="q2" value="0">–ù–µ—Ç, —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–µ</label>
        <label class="opt"><input type="radio" name="q2" value="0">–ù–µ –∑–Ω–∞—é/–¥—Ä—É–≥–æ–π –æ—Ç–¥–µ–ª</label>
      </fieldset>

      <fieldset class="q"><legend>3. –ù–∞ —á—ë–º –æ—Å–Ω–æ–≤–∞–Ω –±—é–¥–∂–µ—Ç?</legend>
        <label class="opt"><input type="radio" name="q3" value="1">–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</label>
        <label class="opt"><input type="radio" name="q3" value="0">–ü—Ä–æ—à–ª—ã–µ –≥–æ–¥—ã</label>
        <label class="opt"><input type="radio" name="q3" value="0">–°—É–±—ä–µ–∫—Ç–∏–≤–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è</label>
        <label class="opt"><input type="radio" name="q3" value="0">–ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞</label>
      </fieldset>

      <fieldset class="q"><legend>4. –ü—Ä–æ–≤–µ—Ä—è–ª–∏ —Ü–µ–Ω—ã –∑–∞ 12 –º–µ—Å.?</legend>
        <label class="opt"><input type="radio" name="q4" value="1">–î–∞, —Ä–µ–≥—É–ª—è—Ä–Ω–æ</label>
        <label class="opt"><input type="radio" name="q4" value="0">–î–∞–≤–Ω–µ–Ω—å–∫–æ</label>
        <label class="opt"><input type="radio" name="q4" value="0">–ù–µ—Ç</label>
        <label class="opt"><input type="radio" name="q4" value="0">–ù–µ –∑–Ω–∞—é</label>
      </fieldset>

      <fieldset class="q"><legend>5. –†–µ–µ—Å—Ç—Ä—ã (–ü–ü ‚Ññ185, ‚Ññ878) —É—á—Ç–µ–Ω—ã?</legend>
        <label class="opt"><input type="radio" name="q5" value="1">–î–∞, –ø–æ–ª–Ω–æ—Å—Ç—å—é</label>
        <label class="opt"><input type="radio" name="q5" value="0">–ß–∞—Å—Ç–∏—á–Ω–æ</label>
        <label class="opt"><input type="radio" name="q5" value="0">–ù–µ—Ç</label>
        <label class="opt"><input type="radio" name="q5" value="1">–ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ</label>
      </fieldset>

      <fieldset class="q"><legend>6. –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–æ—Å—Ç—É —Ü–µ–Ω 3‚Äì5√ó –∏–∑-–∑–∞ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–∏–∫–∏?</legend>
        <label class="opt"><input type="radio" name="q6" value="1">–î–∞, –∑–∞–ª–æ–∂–µ–Ω —Ä–µ–∑–µ—Ä–≤</label>
        <label class="opt"><input type="radio" name="q6" value="0">–ù–µ—Ç, –±—É–¥–µ—Ç –ø—Ä–æ–±–ª–µ–º–æ–π</label>
        <label class="opt"><input type="radio" name="q6" value="0">–ù–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏</label>
        <label class="opt"><input type="radio" name="q6" value="0">–ù–µ –∑–Ω–∞—é</label>
      </fieldset>

      <fieldset class="q"><legend>7. –ö—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –ø–æ –ø–µ—á–∞—Ç–∏?</legend>
        <label class="opt"><input type="radio" name="q7" value="1">IT-–¥–∏—Ä–µ–∫—Ç–æ—Ä/—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å</label>
        <label class="opt"><input type="radio" name="q7" value="0">–°–∏—Å–∞–¥–º–∏–Ω/–∏–Ω–∂–µ–Ω–µ—Ä</label>
        <label class="opt"><input type="radio" name="q7" value="0">–ó–∞–∫—É–ø–∫–∏</label>
        <label class="opt"><input type="radio" name="q7" value="0">–ù–µ—Å–∫–æ–ª—å–∫–æ –ª–∏—Ü –±–µ–∑ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏</label>
      </fieldset>

      <fieldset class="q"><legend>8. –ù–∞ —á—ë–º –æ—Å–Ω–æ–≤–∞–Ω–∞ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è?</legend>
        <label class="opt"><input type="radio" name="q8" value="1">–î–∞–Ω–Ω—ã–µ –∏ –º–µ—Ç—Ä–∏–∫–∏ (TCO, SLA)</label>
        <label class="opt"><input type="radio" name="q8" value="0">¬´–í—Å–µ–≥–¥–∞ —Ç–∞–∫ –¥–µ–ª–∞–ª–∏¬ª</label>
        <label class="opt"><input type="radio" name="q8" value="0">–°–æ–≤–µ—Ç—ã –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤</label>
        <label class="opt"><input type="radio" name="q8" value="0">–≠–∫–æ–Ω–æ–º–∏—è ¬´–∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å¬ª</label>
      </fieldset>

      <fieldset class="q"><legend>9. –°–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∫–∞—Ä—Ç—Ä–∏–¥–∂–∏/–∑–∞–ø—Ä–∞–≤–∫–∞?</legend>
        <label class="opt"><input type="radio" name="q9" value="1">–ù–µ—Ç, —Ç–æ–ª—å–∫–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—ã</label>
        <label class="opt"><input type="radio" name="q9" value="0">–î–∞, –º–∞—Å—Å–æ–≤–æ</label>
        <label class="opt"><input type="radio" name="q9" value="0">–î–∞, —á–∞—Å—Ç–∏—á–Ω–æ</label>
        <label class="opt"><input type="radio" name="q9" value="0">–ù–µ –∑–Ω–∞—é</label>
      </fieldset>

      <fieldset class="q"><legend>10. –£—Ä–æ–≤–µ–Ω—å –∑—Ä–µ–ª–æ—Å—Ç–∏?</legend>
        <label class="opt"><input type="radio" name="q10" value="1">–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π ‚Äî –ø–æ–ª–∏—Ç–∏–∫–∞, –º–µ—Ç—Ä–∏–∫–∏, –±—é–¥–∂–µ—Ç</label>
        <label class="opt"><input type="radio" name="q10" value="0">–¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–π</label>
        <label class="opt"><input type="radio" name="q10" value="0">–†–µ–∞–∫—Ç–∏–≤–Ω—ã–π</label>
        <label class="opt"><input type="radio" name="q10" value="0">–°—Ç–∏—Ö–∏–π–Ω–æ/–Ω–µ—Ç —Å–∏—Å—Ç–µ–º—ã</label>
      </fieldset>

      <fieldset class="q"><legend>11. –ë—é–¥–∂–µ—Ç –±–µ–∑ ¬´—Å–ª–µ–ø—ã—Ö –∑–æ–Ω¬ª?</legend>
        <label class="opt"><input type="radio" name="q11" value="1">–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–≤–µ—Ä–µ–Ω</label>
        <label class="opt"><input type="radio" name="q11" value="0">–°–∫–æ—Ä–µ–µ —É–≤–µ—Ä–µ–Ω</label>
        <label class="opt"><input type="radio" name="q11" value="0">–ï—Å—Ç—å —Å–æ–º–Ω–µ–Ω–∏—è</label>
        <label class="opt"><input type="radio" name="q11" value="0">–¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–∞</label>
      </fieldset>
    </form>

    <button id="fallbackSubmit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–±—Ä–∞—É–∑–µ—Ä)</button>

    <div id="res" class="result">
      <h3 id="resTitle">–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç</h3>
      <div id="resText" class="hint"></div>
      <div class="ctas">
        <a class="cta primary" target="_blank" href="https://t.me/chelebaev">üí¨ –û–±—Å—É–¥–∏—Ç—å —Å —ç–∫—Å–ø–µ—Ä—Ç–æ–º</a>
        <a id="ctaContact" class="cta secondary">üì© –û—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã</a>
      </div>
    </div>

    <div id="leadForm">
      <h3>–û—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã</h3>
      <input id="name" placeholder="–í–∞—à–µ –∏–º—è">
      <input id="company" placeholder="–ö–æ–º–ø–∞–Ω–∏—è">
      <input id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ email">
      <textarea id="comment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" rows="3"></textarea>
      <div class="hint">–û—Ç–ø—Ä–∞–≤–ª—è—è –¥–∞–Ω–Ω—ã–µ, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å <a href="https://lekom.ru/politika-konfidencialnosti/" target="_blank">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>.</div>
      <button id="sendLead">üì© –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã</button>
      <div id="leadMsg">‚úÖ –°–ø–∞—Å–∏–±–æ! –ö–æ–Ω—Ç–∞–∫—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã.</div>
    </div>
  </div>
</div>

<script>
const tg = window.Telegram?.WebApp;
if(tg){tg.ready();tg.expand();try{tg.MainButton.enable();}catch{}}

// –∂—ë—Å—Ç–∫–∏–π —Ñ–æ–ª–±—ç–∫ –Ω–∞ —Ç–≤–æ–π exec
const params = new URLSearchParams(location.search);
const GAS_HOOK = params.get('hook') || 'https://script.google.com/macros/s/AKfycby_DkAG_iACh4uuE93yaQ5LZ7zuXrzVxKSm7f3mlRJfZz49tPlxCNaJq3B4nPmAPf6X/exec';
document.getElementById('diag').textContent = 'hook: ' + (new URL(GAS_HOOK).host);

// –ø–∏–Ω–≥ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ (–≤–∏–¥–Ω–æ –≤ Logs/Results)
(async()=>{try{await fetch(GAS_HOOK,{method:'POST',mode:'no-cors',body:JSON.stringify({type:'result',score:-1,verdict:'PING',advice:'webapp-open',t:new Date().toISOString()})});}catch{}})();

const qGroups=[...document.querySelectorAll('form fieldset.q')];
const total=qGroups.length;
const bar=document.getElementById('bar'),pc=document.getElementById('pc');
function answered(){return qGroups.reduce((n,fs)=>n+(fs.querySelector('input:checked')?1:0),0);}
function updateUI(){const d=answered();bar.style.width=Math.round(d/Math.max(1,total)*100)+'%';pc.textContent=d+'/'+total;if(tg){try{d===total?(tg.MainButton.setText('–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç'),tg.MainButton.show()):tg.MainButton.hide();}catch{}}}
document.addEventListener('change',e=>{if(e.target.matches('input[type="radio"]'))updateUI();});
document.addEventListener('DOMContentLoaded',updateUI);

async function postToGAS(url,obj){
  const body=JSON.stringify(obj);
  try{if(navigator.sendBeacon){if(navigator.sendBeacon(url,new Blob([body],{type:'text/plain'})))return true;}}catch{}
  try{await fetch(url,{method:'POST',mode:'no-cors',body});return true;}catch{}
  try{new Image().src=url+'?q='+encodeURIComponent(body).slice(0,1800);}catch{}
}

async function submit(){
  const answers={},qfs=[...document.querySelectorAll('form fieldset.q')];let score=0;
  qfs.forEach((fs,i)=>{const c=fs.querySelector('input:checked');const v=Number(c?c.value:0);answers['q'+(i+1)]=v;if(v===1)score++;});
  let verdict,advice,icon;
  if(score>=8){icon='‚≠êÔ∏è';verdict='–ó—Ä–µ–ª–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞';advice='–¢–æ—á–µ—á–Ω—ã–π –∞—É–¥–∏—Ç TCO –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è ¬´–¥–ª–∏–Ω–Ω–æ–≥–æ —Ö–≤–æ—Å—Ç–∞¬ª.';}
  else if(score>=5){icon='‚ö†Ô∏è';verdict='–ö–æ–Ω—Ç—Ä–æ–ª—å —á–∞—Å—Ç–∏—á–Ω—ã–π';advice='–ü–µ—Ä–µ—Å–º–æ—Ç—Ä –±—é–¥–∂–µ—Ç–∞, —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª–∏—Ç–∏–∫–∏ –∏ KPI (TCO, SLA).';}
  else{icon='‚ùóÔ∏è';verdict='–í—ã—Å–æ–∫–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å';advice='–≠–∫—Å–ø—Ä–µ—Å—Å-–∞—É–¥–∏—Ç, –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è, –±—ã—Å—Ç—Ä—ã–µ –º–µ—Ä—ã —ç–∫–æ–Ω–æ–º–∏–∏.';}
  window.__lastResult={score,verdict,advice,answers};
  await postToGAS(GAS_HOOK,{type:'result',...window.__lastResult,t:new Date().toISOString(),initData:tg?.initDataUnsafe||null});
  document.getElementById('resTitle').textContent=`–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${icon} ${score}/${total} ‚Äî ${verdict}`;
  document.getElementById('resText').textContent=advice;
  document.getElementById('res').style.display='block';
  if(tg){try{tg.MainButton.setText('–ó–∞–∫—Ä—ã—Ç—å');tg.onEvent('mainButtonClicked',()=>tg.close());tg.MainButton.show();}catch{}}
}

if(tg)tg.onEvent('mainButtonClicked',submit);
document.getElementById('fallbackSubmit').addEventListener('click',submit);

document.getElementById('ctaContact').addEventListener('click',()=>{document.getElementById('leadForm').style.display='block';});

document.getElementById('sendLead').addEventListener('click',async()=>{
  const name=document.getElementById('name').value.trim();
  const company=document.getElementById('company').value.trim();
  const phone=document.getElementById('phone').value.trim();
  const comment=document.getElementById('comment').value.trim();
  if(!name&&!phone){alert('–£–∫–∞–∂–∏—Ç–µ —Ö–æ—Ç—è –±—ã –∏–º—è –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω/email');return;}
  const lead={type:'lead',name,company,phone,comment,consent:true,policyUrl:'https://lekom.ru/politika-konfidencialnosti/',result:window.__lastResult||null,t:new Date().toISOString(),initData:tg?.initDataUnsafe||null};
  await postToGAS(GAS_HOOK,lead);
  document.getElementById('leadMsg').style.display='block';
  document.getElementById('sendLead').disabled=true;
});
</script>
</body>
</html>
