<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>–õ–ï–ö–û–ú ¬∑ –ê—É–¥–∏—Ç –ø–µ—á–∞—Ç–∏</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
  :root{--bg:#0f1115;--card:#12151c;--muted:#9aa0a6;--line:#2a2f3a;--brand:#0a84ff}
  *{box-sizing:border-box}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;margin:0;background:var(--bg);color:#f5f7fb;-webkit-font-smoothing:antialiased;touch-action:manipulation;-webkit-tap-highlight-color:transparent}
  .wrap{max-width:900px;margin:0 auto;padding:20px}
  .card{background:var(--card);border-radius:16px;box-shadow:0 4px 18px rgba(0,0,0,.25);padding:20px}
  h1{margin:0 0 6px;font-size:22px}
  .sub{color:var(--muted);margin-bottom:8px}
  .meta{font-size:13px;color:var(--muted);margin-bottom:12px}
  .section{margin-top:22px;font-weight:800;color:#7dd3fc;font-size:15px}
  fieldset.q{border:none;background:transparent;padding:6px 0 4px;margin:14px 0}
  fieldset.q legend{font-weight:700;margin-bottom:10px}

  /* –ü–ª–∞—à–∫–∏-–æ—Ç–≤–µ—Ç—ã (—Ä–∞–¥–∏–æ-—Å—Ç–∏–ª—å) */
  .opt{display:inline-flex;margin:6px 8px 6px 0;position:relative}
  .opt input{position:absolute;opacity:0;pointer-events:none}
  .opt span{display:inline-block;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.14);
            background:rgba(255,255,255,.05);color:#f5f7fb;font-size:14px;line-height:1.25;
            transition:transform .06s,background .12s,border-color .12s;user-select:none}
  .opt:focus-within span,.opt:hover span{background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.24)}
  .opt input:checked+span{background:rgba(10,132,255,.14);border-color:var(--brand)}
  @media(max-width:560px){.opt{display:block;margin-right:0}.opt span{width:100%}}

  .progress{height:8px;background:var(--line);border-radius:8px;overflow:hidden;margin:10px 0}
  .bar{height:100%;width:0;background:var(--brand)}
  .hint{font-size:12px;color:var(--muted)}
  .submit{width:100%;margin-top:12px;padding:14px;border:none;border-radius:12px;background:var(--brand);
          color:#fff;font-weight:700;cursor:pointer}

  .result{display:none;margin-top:16px;padding:16px;border-left:4px solid var(--brand);
          background:rgba(10,132,255,.08);border-radius:10px}
  .ctas{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .cta{display:inline-block;text-decoration:none;padding:12px 14px;border-radius:10px;font-weight:700;cursor:pointer}
  .cta.primary{background:var(--brand);color:#fff}
  .cta.secondary{background:#1e2533;color:#fff}

  #leadForm{display:none;margin-top:20px}
  #leadForm input,#leadForm textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #334155;background:#0e1420;color:#fff}
  #sendLead{background:var(--brand);color:#fff;font-weight:700;padding:12px;border:none;border-radius:10px;cursor:pointer;width:100%;margin-top:8px}
  #leadMsg{margin-top:10px;color:#7dd3fc;display:none}
  a{color:#7dd3fc}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>–ê—É–¥–∏—Ç –ø–µ—á–∞—Ç–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã</h1>
    <div class="sub">–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ 11 –≤–æ–ø—Ä–æ—Å–æ–≤, —á—Ç–æ–±—ã –æ—Ü–µ–Ω–∏—Ç—å –∑—Ä–µ–ª–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—á–∞—Ç—å—é</div>
    <div class="meta">‚è± ~5 –º–∏–Ω—É—Ç ¬∑ –æ—Ç–≤–µ—Ç—ã –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã</div>

    <div class="progress"><div id="bar" class="bar"></div></div>
    <div id="pc" class="hint">0/11</div>

    <form id="f">
      <div class="section">üß© –ë–ª–æ–∫ 1. –ò–ª–ª—é–∑–∏—è –∫–æ–Ω—Ç—Ä–æ–ª—è</div>
      <fieldset class="q"><legend>1) –ö–∞–∫ –≤—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —É—á—ë—Ç–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ –ø–µ—á–∞—Ç—å?</legend>
        <label class="opt"><input type="radio" name="q1" value="1"><span>–ü–æ–ª–Ω—ã–π —É—á—ë—Ç –≤—Å–µ—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ (–≤–∫–ª—é—á–∞—è –∫–∞–ø–∏—Ç–∞–ª—å–Ω—ã–µ)</span></label>
        <label class="opt"><input type="radio" name="q1" value="0"><span>–£—á—ë—Ç —á–∞—Å—Ç–∏—á–Ω—ã–π / –ø–æ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è–º –ø–æ-—Ä–∞–∑–Ω–æ–º—É</span></label>
        <label class="opt"><input type="radio" name="q1" value="0"><span>–£—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ä–∞—Å—Ö–æ–¥–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</span></label>
        <label class="opt"><input type="radio" name="q1" value="0"><span>–¢–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ‚Äî ¬´–Ω–∞ –≥–ª–∞–∑¬ª</span></label>
      </fieldset>

      <fieldset class="q"><legend>2) –í–∫–ª—é—á–µ–Ω—ã –ª–∏ –∫–∞–ø–∏—Ç–∞–ª—å–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã (–∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ) –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—á–∞—Ç–∏?</legend>
        <label class="opt"><input type="radio" name="q2" value="1"><span>–î–∞, —Å—á–∏—Ç–∞–µ–º TCO</span></label>
        <label class="opt"><input type="radio" name="q2" value="0"><span>–ß–∞—Å—Ç–∏—á–Ω–æ, —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫—Ä—É–ø–Ω—ã—Ö –∑–∞–∫—É–ø–∫–∞—Ö</span></label>
        <label class="opt"><input type="radio" name="q2" value="0"><span>–ù–µ—Ç, —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã</span></label>
        <label class="opt"><input type="radio" name="q2" value="0"><span>–ù–µ –∑–Ω–∞—é / —ç—Ç–∏–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –¥—Ä—É–≥–æ–π –æ—Ç–¥–µ–ª</span></label>
      </fieldset>

      <div class="section">üí∞ –ë–ª–æ–∫ 2. –õ–æ–≤—É—à–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ü–µ–Ω</div>
      <fieldset class="q"><legend>3) –ù–∞ —á—ë–º –æ—Å–Ω–æ–≤–∞–Ω –±—é–¥–∂–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ—Ö–Ω–∏–∫–∏?</legend>
        <label class="opt"><input type="radio" name="q3" value="1"><span>–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ/–∫–æ—Ç–∏—Ä–æ–≤–∫–∏</span></label>
        <label class="opt"><input type="radio" name="q3" value="0"><span>–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —à–∞–±–ª–æ–Ω—ã –∏–ª–∏ —Ü–∏—Ñ—Ä—ã –ø—Ä–æ—à–ª—ã—Ö –ª–µ—Ç</span></label>
        <label class="opt"><input type="radio" name="q3" value="0"><span>–°—É–±—ä–µ–∫—Ç–∏–≤–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è (¬´–ø—Ä–∏–º–µ—Ä–Ω–æ –∫–∞–∫ —Ä–∞–Ω—å—à–µ¬ª)</span></label>
        <label class="opt"><input type="radio" name="q3" value="0"><span>–ù–µ –≤—ã–¥–µ–ª—è–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –±—é–¥–∂–µ—Ç –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∫–∞</span></label>
      </fieldset>

      <fieldset class="q"><legend>4) –ü–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ –ª–∏ —Ü–µ–Ω—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 12 –º–µ—Å—è—Ü–µ–≤?</legend>
        <label class="opt"><input type="radio" name="q4" value="1"><span>–î–∞, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –ø–µ—Ä–µ—Å–º–æ—Ç—Ä</span></label>
        <label class="opt"><input type="radio" name="q4" value="0"><span>–û–¥–∏–Ω —Ä–∞–∑ –±—ã–ª–æ –¥–∞–≤–Ω–æ, —Ü–µ–Ω—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã</span></label>
        <label class="opt"><input type="radio" name="q4" value="0"><span>–ù–µ—Ç, –Ω–µ –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏</span></label>
        <label class="opt"><input type="radio" name="q4" value="0"><span>–ù–µ –∑–Ω–∞—é</span></label>
      </fieldset>

      <div class="section">üá∑üá∫ –ë–ª–æ–∫ 3. ¬´–ü–∞—Ç—Ä–∏–æ—Ç–∏—á–µ—Å–∫–∞—è¬ª –Ω–∞—Ü–µ–Ω–∫–∞</div>
      <fieldset class="q"><legend>5) –£—á—Ç–µ–Ω—ã –ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ —Ä–µ–µ—Å—Ç—Ä–æ–≤—ã–º —Ä–µ—à–µ–Ω–∏—è–º (–≥–¥–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ)?</legend>
        <label class="opt"><input type="radio" name="q5" value="1"><span>–î–∞, –±—é–¥–∂–µ—Ç —Å —É—á—ë—Ç–æ–º —Ä–µ–µ—Å—Ç—Ä–∞</span></label>
        <label class="opt"><input type="radio" name="q5" value="0"><span>–ß–∞—Å—Ç–∏—á–Ω–æ</span></label>
        <label class="opt"><input type="radio" name="q5" value="0"><span>–ù–µ—Ç</span></label>
        <label class="opt"><input type="radio" name="q5" value="1"><span>–ù–µ–ø—Ä–∏–º–µ–Ω–∏–º–æ</span></label>
      </fieldset>

      <fieldset class="q"><legend>6) –ì–æ—Ç–æ–≤ –ª–∏ –±—é–¥–∂–µ—Ç –∫ —Ä–æ—Å—Ç—É —Ü–µ–Ω 3‚Äì5√ó –∏–∑-–∑–∞ —Ä–µ–≥—É–ª—è—Ç–æ—Ä–∏–∫–∏?</legend>
        <label class="opt"><input type="radio" name="q6" value="1"><span>–î–∞, –µ—Å—Ç—å —Ä–µ–∑–µ—Ä–≤/–≥–∏–±–∫–∏–π –±—é–¥–∂–µ—Ç</span></label>
        <label class="opt"><input type="radio" name="q6" value="0"><span>–ù–µ—Ç, —ç—Ç–æ —Å—Ç–∞–ª–æ –±—ã –ø—Ä–æ–±–ª–µ–º–æ–π</span></label>
        <label class="opt"><input type="radio" name="q6" value="0"><span>–ü–æ–∫–∞ –Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏</span></label>
        <label class="opt"><input type="radio" name="q6" value="0"><span>–ù–µ –∑–Ω–∞—é</span></label>
      </fieldset>

      <div class="section">üß† –ë–ª–æ–∫ 4. –û–ø–∞—Å–Ω–æ—Å—Ç—å –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è</div>
      <fieldset class="q"><legend>7) –ö—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø–æ –ø–µ—á–∞—Ç–∏?</legend>
        <label class="opt"><input type="radio" name="q7" value="1"><span>IT-–¥–∏—Ä–µ–∫—Ç–æ—Ä / —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞</span></label>
        <label class="opt"><input type="radio" name="q7" value="0"><span>–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏–ª–∏ –∏–Ω–∂–µ–Ω–µ—Ä</span></label>
        <label class="opt"><input type="radio" name="q7" value="0"><span>–ó–∞–∫—É–ø–æ—á–Ω—ã–π –æ—Ç–¥–µ–ª</span></label>
        <label class="opt"><input type="radio" name="q7" value="0"><span>–ù–µ—Å–∫–æ–ª—å–∫–æ –ª–∏—Ü –±–µ–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏</span></label>
      </fieldset>

      <fieldset class="q"><legend>8) –ù–∞ —á—ë–º –æ—Å–Ω–æ–≤–∞–Ω—ã —Ä–µ—à–µ–Ω–∏—è –ø–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—é –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏?</legend>
        <label class="opt"><input type="radio" name="q8" value="1"><span>–ú–µ—Ç—Ä–∏–∫–∏, SLA, TCO-–∞–Ω–∞–ª–∏–∑</span></label>
        <label class="opt"><input type="radio" name="q8" value="0"><span>–õ–∏—á–Ω—ã–π –æ–ø—ã—Ç –∏ –ø—Ä–∏–≤—ã—á–∫–∞</span></label>
        <label class="opt"><input type="radio" name="q8" value="0"><span>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤</span></label>
        <label class="opt"><input type="radio" name="q8" value="0"><span>–≠–∫–æ–Ω–æ–º–∏—è ¬´–∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å¬ª</span></label>
      </fieldset>

      <div class="section">üñ®Ô∏è –ë–ª–æ–∫ 5. –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è –∏ —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏</div>
      <fieldset class="q"><legend>9) –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∫–∞—Ä—Ç—Ä–∏–¥–∂–∏/–∑–∞–ø—Ä–∞–≤–∫–∞?</legend>
        <label class="opt"><input type="radio" name="q9" value="1"><span>–ù–µ—Ç, —Ç–æ–ª—å–∫–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏</span></label>
        <label class="opt"><input type="radio" name="q9" value="0"><span>–î–∞, –º–∞—Å—Å–æ–≤–æ</span></label>
        <label class="opt"><input type="radio" name="q9" value="0"><span>–î–∞, —á–∞—Å—Ç–∏—á–Ω–æ</span></label>
        <label class="opt"><input type="radio" name="q9" value="0"><span>–ù–µ –∑–Ω–∞—é</span></label>
      </fieldset>

      <div class="section">üìä –ë–ª–æ–∫ 6. –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞</div>
      <fieldset class="q"><legend>10) –£—Ä–æ–≤–µ–Ω—å –∑—Ä–µ–ª–æ—Å—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—á–∞—Ç—å—é?</legend>
        <label class="opt"><input type="radio" name="q10" value="1"><span>–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π: –ø–æ–ª–∏—Ç–∏–∫–∞, –º–µ—Ç—Ä–∏–∫–∏, –±—é–¥–∂–µ—Ç</span></label>
        <label class="opt"><input type="radio" name="q10" value="0"><span>–¢–∞–∫—Ç–∏—á–µ—Å–∫–∏–π ‚Äî —Ä–µ—à–∞–µ–º –ø–æ –º–µ—Ä–µ –∑–∞–¥–∞—á</span></label>
        <label class="opt"><input type="radio" name="q10" value="0"><span>–†–µ–∞–∫—Ç–∏–≤–Ω—ã–π ‚Äî –¥–µ–π—Å—Ç–≤—É–µ–º –ø—Ä–∏ —Å–±–æ—è—Ö</span></label>
        <label class="opt"><input type="radio" name="q10" value="0"><span>–°—Ç–∏—Ö–∏–π–Ω—ã–π ‚Äî —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–µ—Ç</span></label>
      </fieldset>

      <fieldset class="q"><legend>11) –ù–∞—Å–∫–æ–ª—å–∫–æ —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –±—é–¥–∂–µ—Ç –±–µ–∑ ¬´—Å–ª–µ–ø—ã—Ö –∑–æ–Ω¬ª?</legend>
        <label class="opt"><input type="radio" name="q11" value="1"><span>–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–≤–µ—Ä–µ–Ω</span></label>
        <label class="opt"><input type="radio" name="q11" value="1"><span>–°–∫–æ—Ä–µ–µ —É–≤–µ—Ä–µ–Ω</span></label>
        <label class="opt"><input type="radio" name="q11" value="0"><span>–ï—Å—Ç—å —Å–æ–º–Ω–µ–Ω–∏—è</span></label>
        <label class="opt"><input type="radio" name="q11" value="0"><span>–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ—Å–º–æ—Ç—Ä</span></label>
      </fieldset>
    </form>

    <button id="submitBtn" class="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>

    <div id="res" class="result">
      <h3 id="resTitle">–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç</h3>
      <div id="resText" class="hint"></div>
      <div class="ctas">
        <a class="cta primary" target="_blank" href="https://t.me/chelebaev">üí¨ –û–±—Å—É–¥–∏—Ç—å —Å —ç–∫—Å–ø–µ—Ä—Ç–æ–º</a>
        <a id="ctaContact" class="cta secondary">üì© –û—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã</a>
      </div>
    </div>

    <div id="leadForm">
      <h3>–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã</h3>
      <input id="name" placeholder="–ò–º—è">
      <input id="company" placeholder="–ö–æ–º–ø–∞–Ω–∏—è">
      <input id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ email">
      <textarea id="comment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" rows="3"></textarea>
      <div class="hint">–û—Ç–ø—Ä–∞–≤–ª—è—è –¥–∞–Ω–Ω—ã–µ, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å <a href="https://lekom.ru/politika-konfidencialnosti/" target="_blank">–ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>.</div>
      <button id="sendLead">üì© –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã</button>
      <div id="leadMsg">‚úÖ –°–ø–∞—Å–∏–±–æ! –ö–æ–Ω—Ç–∞–∫—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã.</div>
    </div>
  </div>
</div>

<script>
/* === HOOK: –ø–æ—Å—Ç–∞–≤—å —Å–≤–æ–π –∞–∫—Ç—É–∞–ª—å–Ω—ã–π (/exec –∏–ª–∏ googleusercontent) === */
const HOOK = 'https://script.google.com/macros/s/AKfycbyvq_c0Hx2jKQ5PyMpqMuCRiCY_PAaMaocgrCAf1X20fVbIrJlj_mQ3cp-TG0TRNUbw/exec';

/* --- Telegram init data --- */
let tgInit = {};
try {
  if (window.Telegram && window.Telegram.WebApp) {
    window.Telegram.WebApp.ready();
    tgInit = window.Telegram.WebApp.initDataUnsafe || {};
  }
} catch(_) {}
function withTelegramData(obj){ obj.initData = tgInit; return obj; }

/* === UI –±—ã—Å—Ç—Ä—ã–π === */
const f = document.getElementById('f');
const flds = [...document.querySelectorAll('fieldset.q')];
const total = flds.length, bar = document.getElementById('bar'), pc = document.getElementById('pc');

let rafId = 0;
function answered(){ return flds.reduce((n,fs)=>n+(fs.querySelector('input:checked')?1:0),0); }
function scheduleUpdate(){
  if (rafId) return;
  rafId = requestAnimationFrame(()=>{ rafId = 0; const d=answered(); bar.style.width=(100*d/Math.max(1,total))+'%'; pc.textContent=d+'/'+total; });
}
f.addEventListener('click', (e)=>{
  const lab = e.target.closest('.opt'); if(!lab) return;
  const inp = lab.querySelector('input'); if(!inp) return;
  if (!inp.checked){ inp.checked = true; scheduleUpdate(); }
}, { passive:true });
f.addEventListener('change', (e)=>{ if(e.target.matches('input[type="radio"]')) scheduleUpdate(); }, { passive:true });

/* === –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ GAS: p= base64url === */
async function send(obj){
  const json = JSON.stringify(obj);
  const b64  = btoa(unescape(encodeURIComponent(json))).replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'');
  const url  = HOOK + (HOOK.includes('?')?'&':'?') + 'p=' + b64;
  try { await fetch(url,{ method:'GET', mode:'no-cors', keepalive:true, cache:'no-store' }); } catch {}
}

/* === –°–∞–±–º–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ === */
const submitBtn = document.getElementById('submitBtn');
submitBtn.addEventListener('click', async (e)=>{
  e.preventDefault();
  submitBtn.disabled = true;
  const ans={}, fs=flds; let s=0;
  fs.forEach((fld,i)=>{ const c=fld.querySelector('input:checked'); const v=Number(c?c.value:0); ans['q'+(i+1)]=v; if(v===1)s++; });
  const verdict = s>=8 ? '–ó—Ä–µ–ª–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞' : s>=5 ? '–ö–æ–Ω—Ç—Ä–æ–ª—å —á–∞—Å—Ç–∏—á–Ω—ã–π' : '–í—ã—Å–æ–∫–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç—å';
  const advice  = s>=8 ? '–¢–æ—á–µ—á–Ω—ã–π –∞—É–¥–∏—Ç TCO –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è.'
                       : s>=5 ? '–ü–µ—Ä–µ—Å–º–æ—Ç—Ä –±—é–¥–∂–µ—Ç–∞ –∏ KPI (TCO, SLA).'
                              : '–≠–∫—Å–ø—Ä–µ—Å—Å-–∞—É–¥–∏—Ç, –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è, –±—ã—Å—Ç—Ä—ã–µ –º–µ—Ä—ã —ç–∫–æ–Ω–æ–º–∏–∏.';
  const payload = withTelegramData({ type:'result', score:s, verdict, advice, answers:ans, t:new Date().toISOString() });
  await send(payload);
  document.getElementById('resTitle').textContent=`–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${s}/${total} ‚Äî ${verdict}`;
  document.getElementById('resText').textContent=advice;
  const res = document.getElementById('res'); res.style.display='block';
  setTimeout(()=>res.scrollIntoView({behavior:'smooth',block:'start'}),30);
  setTimeout(()=>{ submitBtn.disabled=false; }, 600);
});

/* === –ö–æ–Ω—Ç–∞–∫—Ç—ã === */
document.getElementById('ctaContact').addEventListener('click', (e)=>{
  e.preventDefault();
  const lf = document.getElementById('leadForm'); lf.style.display='block';
  lf.scrollIntoView({behavior:'smooth',block:'start'});
});
document.getElementById('sendLead').addEventListener('click', async (e)=>{
  e.preventDefault();
  const name=document.getElementById('name').value.trim();
  const company=document.getElementById('company').value.trim();
  const phone=document.getElementById('phone').value.trim();
  const comment=document.getElementById('comment').value.trim();
  const lead=withTelegramData({
    type:'lead', name, company, phone, comment, consent:true,
    policyUrl:'https://lekom.ru/politika-konfidencialnosti/', t:new Date().toISOString()
  });
  await send(lead);
  document.getElementById('leadMsg').style.display='block';
  document.getElementById('sendLead').disabled=true;
});
</script>
</body>
</html>
